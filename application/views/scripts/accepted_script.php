<script>    function set_row4(id, row) {//    debugger        $(row).find("td:not(:last-child)").each(function (index, td) {            $(td).addClass("db-table-link-row");            $(td).attr("data-id", id);            $(td).attr("data-href", base + "accepted/referral_details/" + id);        });        // $(row).addClass("db-table-link-row");        // $(row).addClass("accepted_row");        return '<a class="btn btn-theme bttn-circle view_add_patient" data-id="' + id + '" ' +                'data-toggle="modal" data-target="#modal_add_patient_visit"><i class="fa fa-plus-circle"></i>&nbsp;&nbsp;Patient Visit</a>';    }    function set_missing_status(status, dot) {        if (dot == "red") {            return '<span class="fc-event-dot" style="background-color:#f74444"></span>  ' + status;        } else if (dot == "green") {            return '<span class="fc-event-dot" style="background-color:#88b794"></span>  ' + status;        } else if (dot == "yellow") {            return '<span class="fc-event-dot" style="background-color:#9da1c3"></span>  ' + status;        } else if (dot == "blue") {            return '<span class="fc-event-dot" style="background-color:#e7e92a"></span>  ' + status;        } else {            console.log("empty color");            console.log(status, dot);            return status;        }    }    max_fields = 10;    //for reason referral    var x_reason = 0; //initlal text box count    function add_reason(text) {        if (x_reason < 1) { //max input box allowed            x_reason++; //text box increment            wrapper = $("#btn_add_reason").closest("div.wrapper_div").find(".edit_reasons");            $(wrapper).append('<div><div class="checkbox"><label><input type="checkbox" name="reasons[]" value="' + text + '" checked><span class="cr"><i class="cr-icon fa fa-check"></i><i class="bully" style="display: none;">-</i></span><input type="text" placeholder="Type your text" value="' + text + '" class="dummy_checkbox"/></label><a href="#" class="remove_field edit_reason">&nbsp;&nbsp;<i class="fa fa-minus-circle" aria-hidden="true"></i></a></div></div>'); //add input box        }    }    function get_clinic_physicians() {        form = $("#sample_form");        url = base + "referral/get_clinic_physicians";        data = form.serialize();        $.post({            url: url,            data: data        }).done(function (response) {            if (IsJsonString(response)) {                data = JSON.parse(response);                options = "<option value='unassign'>Unassigned</option>";                for (i = 0; i < data.length; i++) {                    options += "<option value='" + data[i].id + "'>" + data[i].physician_name + "</option>";                }                $("#assigned_physician").html(options);            }        });    }    $(document).ready(function () {        $("#li_accepted").addClass("active");        get_clinic_physicians();        $("table").on("click", ".db-table-link-row", function () {            location.href = $(this).data("href");        });        $("#btn_view_add_new_patient").on("click", function () {            $("#modal_add_new_patient").modal("show");        });        $("#form_add_patient").on("click", "#btn_add_reason", function (e) {            //on add input button click            add_reason("");        });        $("#form_add_patient").on("click", ".edit_reason.remove_field", function (e) {            //user click on remove text            $(this).closest("div.checkbox").remove();            x_reason--;        });        $("#btn_add_new_patient").on("click", function () {            form = $("#form_add_patient");            data = $(form).serialize();            url = base + "accepted/new_referral";            $.post({                url: url,                data: data            }).done(function (response) {                if (IsJsonString(response)) {                    data = JSON.parse(response);                    if (data == true) {                        $(".modal").modal("hide");                        success("Patient Successfully Added");                        global_data.table_accepted.ajax.reload();                        get_latest_dashboard_counts();                    } else {                        error(data);                    }                } else {                    error("Unexpected Error Occured");                }            });        });        $.dobPicker({            daySelector: '#form_add_patient #pat_dob_day', /* Required */            monthSelector: '#form_add_patient #pat_dob_month', /* Required */            yearSelector: '#form_add_patient #pat_dob_year', /* Required */            dayDefault: 'Day', /* Optional */            monthDefault: 'Month', /* Optional */            yearDefault: 'Year', /* Optional */            minimumAge: 0, /* Optional */            maximumAge: 120 /* Optional */        });        // $('table#table_accepted').on("click", ".accepted_row", function() {        //     let id = $(this).data('id');        //     location.href = base + "accepted/referral_details/" + id;        // });        $("table").on("click", ".view_add_patient", function () {            global_data.referral_id = $(this).data("id");        });        $("#btn_add_patient_visit").on("click", function () {            form = $("#form_add_patient_visit");            form.find("#id").val(global_data.referral_id);            data = form.serialize();            url = base + "referral/add_patient_visit";            $.post({                url: url,                data: data            }).done(function (response) {                if (IsJsonString(response)) {                    data = JSON.parse(response);                    if (data == true) {                        $(".modal").modal("hide");                        success("Patient Visit Successfully Created");                        global_data.table_accepted.ajax.reload();                        get_latest_dashboard_counts();                    } else {                        error(data);                    }                } else {                    error("Unexpected Error Occured");                }            });        });        //  *** Accepted Datatable        global_data.table_accepted_title = "Accepted Referral";        global_data.table_accepted = $("#table_accepted").DataTable({            "processing": true,            "serverSide": true,            "autoWidth": false,            "language": {                "emptyTable": "There are no patients to be scheduled",                "info": "Showing _START_ to _END_ of _TOTAL_ " + global_data.table_accepted_title,                "infoEmpty": "No results found",                "infoFiltered": "(filtered from _MAX_ total " + global_data.table_accepted_title + ")",                "infoPostFix": "",                "thousands": ",",                "lengthMenu": "Show _MENU_ ",                "loadingRecords": "Loading " + global_data.table_accepted_title,                "processing": "Processing " + global_data.table_accepted_title,                "search": "",                "zeroRecords": "No matching " + global_data.table_accepted_title + " found"            },            "ajax": "<?php echo base_url(); ?>accepted/ssp_accepted",            "rowCallback": function (row, data, index) {                $('td:eq(4)', row).html(set_row4(data[5], row));                $('td:eq(3)', row).html(set_missing_status(data[3], data[4]));            },            "dom": get_dom_plan(),            // "drawCallback": set_patients_table,            "columnDefs": [                {"width": "20%", "targets": 0},                {"width": "20%", "targets": 1},                {"width": "20%", "targets": 2},                {"width": "20%", "targets": 3},                {"width": "20%", "targets": 4}            ],            "order": []        });        $("#table_accepted").wrap('<div class="table-responsive"></div>');        // $("#btn_view_add_patient").appendTo("#patients_table_wrapper .button-placeholder");        $(".dataTables_filter input").before('<i class="fa fa-search datatable-search"></i>');        $(".dataTables_filter input").attr('placeholder', 'Search');        //  *** Accepted Datatable Over    });</script> 