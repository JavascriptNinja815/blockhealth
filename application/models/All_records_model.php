<?phpclass All_records_model extends CI_Model {    public function ssp_all_records_model() {        $table = "all_records_dash";        $primaryKey = "id";        $columns = array(            array('db' => 'patient_name', 'dt' => 0),            array('db' => 'physician_name', 'dt' => 1),            array('db' => 'referral_reason', 'dt' => 2),            array('db' => 'id', 'dt' => 3)        );        $sql_details = array(            'user' => $this->db->username,            'pass' => $this->db->password,            'db' => $this->db->database,            'host' => $this->db->hostname        );        $where = "1";        if ($this->session->userdata("login_role") == "clinic_admin")            $where = "clinic_admin=" . $this->session->userdata("user_id");        else if ($this->session->userdata("login_role") == "clinic_physician")            $where = "physician_id=" . $this->session->userdata("physician_id");        require('ssp.class.php');        return json_encode(SSP::complex($_GET, $sql_details, $table, $primaryKey, $columns, null, $where));    }    public function check_valid_referral_state_model() {        $md5_id = $this->uri->segment(3);        $this->db->select("c_ref.id");        $this->db->from("clinic_referrals c_ref, efax_info efax");        $this->db->where(                array(                    "efax.active" => 1,                    "c_ref.active" => 1,                    "md5(c_ref.id)" => $md5_id,                    "efax.to" => $this->session->userdata("user_id")                )        );        $this->db->where("c_ref.efax_id", "efax.id", false);        $result = $this->db->get()->result();        log_message("error", "sql = " . $this->db->last_query());        return ($result) ? true : false;    }}